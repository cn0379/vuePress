<template>
  <div>
    <div id="map"></div>
    <btn @click.native.once="setFill">添加面</btn>
    <btn @click.native.once="remove">删除面</btn>
  </div>
</template>

<script>
let map
import SsiMap from '../../../../../../ssimspro/ssimspro/packages/ssi-map-core/index'
export default {
  data() {
    return {
      id: ''
    }
  },
  mounted() {
    const mapId = document.getElementById('map')
    map = new SsiMap.SsiMap('814600D0-7B9D-411B-A26E-D3AC3B3026BD', {
      container: mapId,
      center: [121.13055, 31.457735],
      zoom: 12,
      style: 'mapbox://styles/mapbox/streets-v11'
    })
  },
  methods: {
    setFill() {
      const data = {
        position: [
          [
            [
              [121.107883, 31.446494],
              [121.106789, 31.448334],
              [121.105805, 31.449403],
              [121.104791, 31.450641],
              [121.102902, 31.452889],
              [121.100397, 31.456009],
              [121.098945, 31.457799],
              [121.097156, 31.460198],
              [121.09653, 31.461063],
              [121.095158, 31.462861],
              [121.092135, 31.461538],
              [121.087208, 31.458812],
              [121.085498, 31.457872],
              [121.085843, 31.456324],
              [121.086279, 31.454299],
              [121.086667, 31.452549],
              [121.0872, 31.451185],
              [121.09429, 31.442962],
              [121.095614, 31.441348],
              [121.099113, 31.437112],
              [121.099823, 31.436708],
              [121.106301, 31.440743],
              [121.105261, 31.442195],
              [121.103369, 31.44514],
              [121.105781, 31.446108]
            ]
          ]
        ],
      }
      const data2 = {
        position: [
          [
            [
              [121.07495442708398, 31.437329101563],
              [121.07459608290003, 31.435802137587],
              [121.07464409722297, 31.43525390625],
              [121.07464382595498, 31.433826768664],
              [121.07464382595498, 31.43273139106],
              [121.07457139757003, 31.432089029948],
              [121.07461941189297, 31.431637098525],
              [121.07464355468801, 31.430589735244],
              [121.07461941189297, 31.429708930122],
              [121.07461914062503, 31.428519422744],
              [121.07459526909798, 31.42728108724],
              [121.07495279948, 31.425662977431],
              [121.07416639539997, 31.425204806858],
              [121.072830946181, 31.424656032987],
              [121.07030436197999, 31.423129340278],
              [121.07004204644102, 31.424224175348],
              [121.06994683159803, 31.42515218099],
              [121.06949381510503, 31.42531765408],
              [121.068612196181, 31.425340440539],
              [121.067766655816, 31.425576985678],
              [121.06842312282998, 31.427422688803],
              [121.068601616754, 31.428405219185],
              [121.06857150607698, 31.429898546007],
              [121.068244357639, 31.432485351563],
              [121.06934733073001, 31.43272515191],
              [121.069185112848, 31.433939344619],
              [121.068955891928, 31.435581325955],
              [121.06906331380299, 31.436514485678],
              [121.06904025607702, 31.437251790365],
              [121.06915934244802, 31.437728135851],
              [121.06875352647603, 31.437799479167],
              [121.06902533637196, 31.438540039063],
              [121.071616753473, 31.437770724827],
              [121.07495442708398, 31.437329101563]
            ]
          ]
        ]
      }
      const id = map.setFill([data,data2],(e)=>{
          console.log(e);
      })
      console.log(id);
      this.id = id
    },
    remove() {
      map.removeAllLayer(this.id)
    }
  }
}
</script>

<style>
#map {
  width: 740px;
  height: 400px;
}

.mapboxgl-control-container {
  display: none;
}
</style>